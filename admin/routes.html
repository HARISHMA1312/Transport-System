<!DOCTYPE html>
<html>

<head>
  <title>Route Management</title>
  <!--<link rel="stylesheet" href="../css/admin-common.css?v=2">-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css" />
  <link rel="stylesheet" href="../css/admin-routes.css?v=3">
  <!-- Leaflet CSS -->
</head>

<body>

  <div class="header">
    <div class="app-name">
      <span class="app-icon">üöå</span>
      Transport Admin
    </div>
    <div class="profile-icon">A</div>
  </div>

  <div class="main-content">
    <div class="welcome-section">
      <h2>Route Management</h2>
      <p>Create and manage bus routes with interactive mapping</p>
    </div>

    <div class="route-management">
      <!-- Left Panel: Form & Map -->
      <div class="card">
        <h3>Create/Edit Route</h3>

        <div class="form-group">
          <label for="routeName">Route Name</label>
          <input type="text" id="routeName" placeholder="e.g., College - Thirunagar">
        </div>

        <div class="form-group">
          <label for="routeBuses">Assign Bus</label>
          <select id="routeBuses">
            <option value="">-- Select Bus --</option>
          </select>
        </div>

        <!-- Current Stop Section -->
        <div id="currentStopSection" class="current-stop-section" style="display: none;">
          <h4 id="currentStopTitle">Adding Source</h4>
          <div class="form-group" style="margin-bottom: 0.5rem;">
            <label for="stopNameInput">Stop Name</label>
            <div class="input-with-button">
              <input type="text" id="stopNameInput" placeholder="e.g., Main Gate, Bus Stand">
              <button id="searchLocationBtn" class="btn btn-info">Search & Set on Map</button>
            </div>
          </div>
          <button id="cancelSetStopBtn" class="btn btn-warning btn-sm">Cancel</button>
        </div>

        <!-- Map Instruction -->
        <div id="mapInstruction" class="map-instruction">
          üìç Click on the map to set the exact location
        </div>

        <!-- Map Container -->
        <div id="map"></div>

        <!-- Control Buttons -->
        <div style="display: flex; gap: 0.5rem; flex-wrap: wrap; margin-bottom: 1rem;">
          <button id="setSourceBtn" class="btn btn-secondary btn-sm">+ Add Source</button>
          <button id="addIntermediateBtn" class="btn btn-info btn-sm">+ Add Intermediate Stop</button>
          <button id="setDestinationBtn" class="btn btn-danger btn-sm">+ Add Destination</button>
          <button id="clearMapBtn" class="btn btn-warning btn-sm">Clear All Stops</button>
        </div>

        <!-- Stops List -->
        <div class="stops-list" id="stopsList"></div>

        <!-- Save/Cancel Buttons -->
        <div style="margin-top: 1.5rem; display: flex; gap: 0.5rem;">
          <button id="saveRouteBtn" class="btn btn-primary">Save Route</button>
          <button id="cancelEditBtn" class="btn" style="background: #e2e8f0; color: #333;">Cancel</button>
        </div>
      </div>

      <!-- Right Panel: Routes List -->
      <div class="card">
        <h3>Existing Routes</h3>
        <div id="routesList"></div>
      </div>
    </div>
  </div>

  <!-- Leaflet JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
  <script src="../js/admin.js?v=3"></script>

</body>

</html>